<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Impostazioni pizzeria — Mangia & Fuggi</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <main class="admin-layout">

    <h1>Impostazioni pizzeria</h1>

    <% if (typeof ok !== 'undefined') { %>
      <p style="color: green; font-weight: bold;">
        Impostazioni salvate correttamente ✅
      </p>
    <% } %>

    <% if (!settings) { %>
      <p>Non sono state trovate impostazioni. Controlla la tabella <code>settings</code>.</p>
    <% } else { %>
      <form method="POST" action="/admin/settings" class="form">

        <h2>Dati pizzeria</h2>

        <label>
          Nome pizzeria<br/>
          <input type="text" name="name"
                 value="<%= settings.name || '' %>"
                 required />
        </label><br/>

        <label>
          Indirizzo<br/>
          <input type="text" name="address"
                 value="<%= settings.address || '' %>" />
        </label><br/>

        <label>
          Partita IVA<br/>
          <input type="text" name="vat_number"
                 value="<%= settings.vat_number || '' %>" />
        </label><br/>

        <label>
          Telefono<br/>
          <input type="text" name="phone"
                 value="<%= settings.phone || '' %>" />
        </label><br/>

        <label>
          Email<br/>
          <input type="email" name="email"
                 value="<%= settings.email || '' %>" />
        </label><br/>

        <h2>Fiscale & Pagamenti</h2>

        <label>
          IVA (%)<br/>
          <input type="number" step="0.1" name="iva_percent"
                 value="<%= settings.iva_percent || 0 %>" />
        </label><br/>

        <label>
          Servizio / coperto (%)<br/>
          <input type="number" step="0.1" name="service_fee_p"
                 value="<%= settings.service_fee_p || 0 %>" />
        </label><br/>

        <label>
          Coperto a persona (€)<br/>
          <input type="number" step="0.1" name="cover_charge"
                 value="<%= settings.cover_charge || 0 %>" />
        </label><br/>

        <label>
          Metodi di pagamento (testo libero)<br/>
          <input type="text" name="payments"
                 placeholder="Contanti, POS, Online"
                 value="<%= settings.payments || '' %>" />
        </label><br/>

        <h2>Preferenze gestione ordini</h2>

        <label>
          <input type="checkbox" name="auto_sound"
                 <%= settings.auto_sound ? 'checked' : '' %> />
          Suono nuovi ordini
        </label><br/>

        <label>
          <input type="checkbox" name="auto_refresh"
                 <%= settings.auto_refresh ? 'checked' : '' %> />
          Auto-aggiorna dashboard
        </label><br/><br/>

        <button type="submit">
          Salva impostazioni
        </button>
      </form>
    <% } %>

  </main>
</body>
</html>