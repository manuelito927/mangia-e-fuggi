<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mangia & Fuggi</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    :root{
      --brand:#9b5c2e;
      --ink:#ffffff;
      --ink-soft:#e9e3dd;
      --glass:#ffffff18;
      --glass-border:#ffffff33;
    }
    *{ box-sizing:border-box }
    body{
      margin:0;
      background:#000;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
    }

    /* ======== AGGIUNTA: sfondo foto ======== */
    /* Imposta l'immagine come sfondo di pagina */
    body{
      background: url('/img/IMPASTA.JPG.jpg') no-repeat center center fixed;
      background-size: cover;
      background-attachment: fixed;
    }
    /* Velo scuro per migliorare leggibilit√† sopra la foto */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background: rgba(0,0,0,0.55);
      z-index:0;
    }
    /* Porta i contenuti sopra il velo */
    .landing, .wrap, .card, .grid, .brand{ position:relative; z-index:1; }
    /* Nascondi il video per usare lo sfondo foto (togli questo blocco se vuoi rivedere il video) */
    .landing video.bg{ display:none; }
    /* ======== FINE AGGIUNTA ======== */

    /* ===== Sezione landing con video ===== */
    .landing{
      position:relative; min-height:100dvh;
      display:flex; align-items:center; justify-content:center;
      padding:22px 14px; overflow:hidden; background:#0000; /* trasparente: lascia vedere la foto */
    }
    .landing video.bg{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:cover;
      filter:brightness(.72) saturate(1.05);
      pointer-events:none;
    }
    .overlay{
      position:absolute; inset:0;
      background: linear-gradient(180deg, #0006, #0000 25%, #0000 75%, #0006);
      pointer-events:none;
    }

    /* wrapper contenuti */
    .wrap{
      position:relative; z-index:1; width:100%; max-width:860px; margin:auto;
      display:flex; flex-direction:column; gap:16px;
    }

    /* Brand */
    .brand{ display:flex; align-items:center; gap:12px }
    .brand .logo{
      width:54px; height:54px; border-radius:14px; object-fit:cover;
      border:2px solid #ffffff66; background:#fff; box-shadow:0 8px 24px #0007;
    }
    .brand-title{
      font-family:"Playfair Display", Georgia, "Times New Roman", serif;
      font-size:32px; font-weight:800; letter-spacing:.3px; line-height:1.05;
    }
    .brand-sub{ color:#ffffffcc; margin-top:4px; font-size:15px }

    /* Cards ‚Äúvetro‚Äù pi√π compatte */
    .grid{ display:grid; gap:14px; grid-template-columns: 1fr; }
    @media (min-width: 720px){ .grid{ grid-template-columns: repeat(3, 1fr); } }
    .card{
      background:var(--glass);
      border:1px solid var(--glass-border);
      border-radius:16px; padding:14px;
      box-shadow:0 10px 30px #00000040; backdrop-filter: blur(6px) saturate(120%);
      display:flex; flex-direction:column; gap:8px; min-height:140px;
    }
    .card h3{ margin:0; font-size:18px; color:#ffe0b3 }
    .card p{ margin:0; color:var(--ink-soft); line-height:1.45; font-size:14.5px }

    .btn{
      align-self:flex-start;
      background:var(--brand); color:#fff; border:0; border-radius:999px;
      padding:9px 14px; font-weight:700; cursor:pointer;
      box-shadow:0 6px 16px #9b5c2e66; text-decoration:none;
      transition: transform .08s ease, background .15s ease;
      font-size:14px;
    }
    .btn:hover{ background:#7c4621; transform:translateY(-1px) }

    .links{ display:flex; gap:10px; flex-wrap:wrap; margin-top:2px }
    .link{ color:#fff; text-decoration:none; border-bottom:1px dashed #ffffff80; font-size:14px }
    .link:hover{ border-bottom-color:#fff }

    @media (max-width: 480px){
      .brand-title{ font-size:26px }
      .card{ min-height:135px }
    }

    /* Switch lingua */
    .lang-switch{
      position:absolute; top:16px; right:16px; z-index:2;
      display:flex; gap:6px; background:var(--glass); border:1px solid var(--glass-border);
      padding:6px; border-radius:999px; backdrop-filter: blur(6px) saturate(120%);
    }
    .lang-switch button{
      background:transparent; color:#fff; border:0; padding:6px 10px; border-radius:999px; cursor:pointer; font-weight:700;
    }
    .lang-switch button.active{ background:#ffffff22 }
  </style>
</head>
<body>
  <!-- üîò Selettore lingua -->
  <div class="lang-switch" aria-label="Language selector">
    <button id="btn-it">üáÆüáπ ITA</button>
    <button id="btn-en">üá¨üáß ENG</button>
  </div>

  <section class="landing">
    <!-- Video di sfondo (tenuto per compatibilit√†; √® nascosto via CSS) -->
    <video class="bg" autoplay muted loop playsinline preload="auto" webkit-playsinline x5-playsinline>
      <source src="/pizza.mp4" type="video/mp4" />
    </video>
    <div class="overlay"></div>

    <div class="wrap">
      <!-- Brand -->
      <div class="brand">
        <img class="logo" src="/img/LOGO.JPG" alt="Mangia & Fuggi" onerror="this.src='/img/fallback.jpg'">
        <div>
          <div class="brand-title">Mangia &amp; Fuggi</div>
          <div class="brand-sub" data-i18n="brand.subtitle">Benvenuto! Scegli cosa vuoi fare</div>
        </div>
      </div>

      <!-- Tre sezioni -->
      <div class="grid">
        <!-- MENU -->
        <div class="card">
          <h3 data-i18n="menu.title">üçï Menu</h3>
          <p data-i18n="menu.desc">Dai classici intramontabili alle pizze gourmet: scopri antipasti, bevande e dessert.</p>
          <a id="link-menu" href="/menu" class="btn" data-i18n="menu.cta">Vai al menu</a>
        </div>
  <!-- PRENOTA UN TAVOLO -->
  <div class="card">
    <h3 data-i18n="booking.title">üçΩÔ∏è Prenota un tavolo</h3>
    <p data-i18n="booking.desc">Controlla i tavoli disponibili e prenota in pochi secondi.</p>
    <a id="link-prenota" href="/prenota" class="btn" data-i18n="booking.cta">Prenota ora</a>
  </div>
        <!-- LA NOSTRA STORIA -->
        <div class="card">
          <h3 data-i18n="story.title">üìñ La nostra storia</h3>
          <p data-i18n="story.desc">Nati nel cuore del Salento: farine selezionate, lievitazioni lente e materie prime italiane.</p>
          <a id="link-storia" href="/storia" class="btn" data-i18n="story.cta">Leggi la storia</a>
        </div>

        <!-- RECENSIONI -->
        <div class="card">
          <h3 data-i18n="reviews.title">‚≠ê Recensioni</h3>
          <p data-i18n="reviews.desc">La tua opinione conta! Lascia una recensione e aiutaci a migliorare.</p>
          <div class="links">
            <a class="btn" href="https://www.google.com/maps/place/?q=place_id:INSERISCI_PLACE_ID" target="_blank" rel="noopener" data-i18n="reviews.google">Scrivi su Google</a>
            <a class="link" href="https://www.tripadvisor.it/" target="_blank" rel="noopener" data-i18n="reviews.trip">Oppure su TripAdvisor</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- üåç Dizionari e logica lingua -->
  <script>
    // 1) Dizionari
    const I18N = {
      it: {
        "brand.subtitle": "Benvenuto! Scegli cosa vuoi fare",
        "menu.title": "üçï Menu",
        "menu.desc": "Dai classici intramontabili alle pizze gourmet: scopri antipasti, bevande e dessert.",
        "menu.cta": "Vai al menu",
        "story.title": "üìñ La nostra storia",
        "story.desc": "Nati nel cuore del Salento: farine selezionate, lievitazioni lente e materie prime italiane.",
        "story.cta": "Leggi la storia",
        "reviews.title": "‚≠ê Recensioni",
        "reviews.desc": "La tua opinione conta! Lascia una recensione e aiutaci a migliorare.",
        "reviews.google": "Scrivi su Google",
        "reviews.trip": "Oppure su TripAdvisor"
      },
      en: {
        "brand.subtitle": "Welcome! Choose what you want to do",
        "menu.title": "üçï Menu",
        "menu.desc": "From timeless classics to gourmet pizzas: explore starters, drinks and desserts.",
        "menu.cta": "See the menu",
        "story.title": "üìñ Our story",
        "story.desc": "Born in the heart of Salento: selected flours, slow leavening and premium Italian ingredients.",
        "story.cta": "Read our story",
        "reviews.title": "‚≠ê Reviews",
        "reviews.desc": "Your opinion matters! Leave a review and help us improve.",
        "reviews.google": "Write on Google",
        "reviews.trip": "Or on TripAdvisor"
      }
    };

    // 2) Rileva/salva lingua (URL ?lang=, altrimenti localStorage, fallback it)
    function getParam(name){
      const m = new URLSearchParams(location.search).get(name);
      return m ? m.trim() : null;
    }
    function currentLang(){
      const fromUrl = getParam('lang');
      if (fromUrl && I18N[fromUrl]) { localStorage.setItem('lang', fromUrl); return fromUrl; }
      const stored = localStorage.getItem('lang');
      if (stored && I18N[stored]) return stored;
      return 'it';
    }
    function applyLang(lang){
      // cambia lang su <html>
      document.documentElement.setAttribute('lang', lang);
      // traduci testi
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        const val = I18N[lang][key];
        if (val) el.textContent = val; // fallback: lascia originale
      });
      // evidenzia bottone attivo
      document.getElementById('btn-it').classList.toggle('active', lang==='it');
      document.getElementById('btn-en').classList.toggle('active', lang==='en');
      // aggiungi ?lang ai link interni
      const qs = `?lang=${lang}`;
      const linkMenu = document.getElementById('link-menu');
      const linkStoria = document.getElementById('link-storia');
      if (linkMenu)  linkMenu.href  = '/menu'  + qs;
      if (linkStoria)linkStoria.href= '/storia'+ qs;
      // aggiorna URL corrente senza ricaricare
      const url = new URL(location.href);
      url.searchParams.set('lang', lang);
      history.replaceState({}, '', url);
    }

    // 3) Eventi switch
    const lang = currentLang();
    applyLang(lang);
    document.getElementById('btn-it').addEventListener('click', ()=>{ localStorage.setItem('lang','it'); applyLang('it'); });
    document.getElementById('btn-en').addEventListener('click', ()=>{ localStorage.setItem('lang','en'); applyLang('en'); });
  </script>
</body>
</html>